{"remainingRequest":"I:\\SmallProject\\mySuperMall-master\\mySuperMall-test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!I:\\SmallProject\\mySuperMall-master\\mySuperMall-test\\src\\views\\home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"I:\\SmallProject\\mySuperMall-master\\mySuperMall-test\\src\\views\\home\\Home.vue","mtime":1651717558728},{"path":"I:\\SmallProject\\mySuperMall-master\\mySuperMall-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\SmallProject\\mySuperMall-master\\mySuperMall-test\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"I:\\SmallProject\\mySuperMall-master\\mySuperMall-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\SmallProject\\mySuperMall-master\\mySuperMall-test\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport NavBar from \"components/common/navbar/NavBar\"\r\nimport Scroll from '@/components/common/scroll/Scroll.vue'\r\n\r\nimport TabControl from '@/components/content/tabControl/TabControl.vue'\r\nimport GoodsList from '@/components/content/goods/goodsList.vue'\r\nimport BackTop from '@/components/content/backTop/BackTop.vue'\r\n\r\n\r\nimport HomeSwiper from \"./childComps/HomeSwiper\"\r\nimport RecommendView from './childComps/RecommendView.vue'\r\nimport FeatureView from './childComps/FeatureView.vue'\r\n\r\nimport {getHomeMultidata,getHomeGoods} from \"@/network/home.js\"\r\nimport {debounce} from \"@/common/utils\"\r\n\r\n\r\n\r\nexport default {\r\n    name:\"Home\",\r\n    components: { \r\n        NavBar,\r\n        Scroll,\r\n        TabControl,\r\n        GoodsList,\r\n        BackTop,\r\n        HomeSwiper,\r\n        RecommendView,\r\n        FeatureView,\r\n        \r\n        \r\n        \r\n      },\r\n      data(){\r\n          return{\r\n              banners: [],\r\n              recommends: [],\r\n              goods: {\r\n                  'pop': {page: 0, list: []},\r\n                  'new': {page: 0, list: []},\r\n                  'sell': {page: 0, list: []}\r\n              },\r\n            currentType: \"pop\",\r\n            isShowBackTop: false,\r\n            tabOffsetTop: 0,\r\n            isTabFixed: false,\r\n            saveY: 0,\r\n          }\r\n         \r\n      },\r\n      computed: {\r\n          showGoods() {\r\n             return this.goods[this.currentType].list;\r\n          },\r\n\r\n      },\r\n    created() {\r\n\r\n        //1.请求多个数据\r\n        this.getHomeMultidata()\r\n        //2.请求商品数据\r\n        this.getHomeGoods('pop')\r\n        this.getHomeGoods('new')\r\n        this.getHomeGoods('sell')\r\n      },\r\n    mounted() {\r\n\r\n\r\n        //created 3.监听item中图片加载完成\r\n        const refresh = debounce(this.$refs.scroll.refresh,50);\r\n        this.$bus.$on('itemImageLoad',()=> {\r\n        //this.$refs.scroll.refresh();\r\n        refresh();\r\n      })\r\n      },\r\n    activated() {\r\n        this.$refs.scroll.scrollTo(0,this.saveY,100)\r\n        this.$refs.scroll.refresh()\r\n        //console.log('lakai');\r\n      },\r\n    deactivated() {\r\n        this.saveY = this.$refs.scroll.getScrollY()\r\n        //console.log(this.$refs.scroll.getScrollY);\r\n        //console.log(this.$refs.scroll.getScrollY());\r\n      },\r\n    methods: {\r\n\r\n\r\n        //防抖函数\r\n\r\n/*         debounce(func,delay) {\r\n            let timer = null;\r\n            return function(...args){\r\n                if(timer) clearTimeout(timer)\r\n\r\n                timer = setTimeout(() => {\r\n                    func.apply(this,args)\r\n                }, delay);\r\n            }\r\n        }, */\r\n\r\n        /**\r\n         * 事件监听的相关的方法\r\n         */\r\n        tabClick(index) {\r\n            switch (index) {\r\n                case 0:\r\n                    this.currentType ='pop'; \r\n                    break;\r\n                case 1:\r\n                    this.currentType = 'new';\r\n                    break;\r\n                case 2:\r\n                    this.currentType = 'sell';\r\n                    break;\r\n            }\r\n            this.$refs.tabControl1.currentIndex = index;\r\n            this.$refs.tabControl2.currentIndex = index;\r\n        },\r\n\r\n        backClick() {\r\n            this.$refs.scroll.scrollTo(0,0,2000)\r\n        },\r\n        contentScroll(position) {\r\n            //1.判断BackTop是否显示\r\n            this.isShowBackTop = (-position.y) > 1000   //这里的处理牛逼\r\n\r\n            //2.决定tabControl是否吸顶（position：fixed）\r\n            this.isTabFixed = (-position.y) > this.tabOffsetTop\r\n\r\n        },\r\n        loadMore() {\r\n            //console.log('上啦加载更多');\r\n            this.getHomeGoods(this.currentType);\r\n        },\r\n        swiperImageLoad() {\r\n          //1.获取tabcontrol的offsetTop\r\n          //所有组件都有一个属性$el：用于获取组件中的元素\r\n          this.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop;\r\n        \r\n\r\n        },\r\n        /**\r\n         * 网络请求相关的方法\r\n         */\r\n        getHomeMultidata() {\r\n            getHomeMultidata().then(res => {\r\n                this.banners = res.data.banner.list;\r\n                this.recommends = res.data.recommend.list;\r\n            })\r\n        },\r\n        getHomeGoods(type) {\r\n            const page = this.goods[type].page+1;\r\n            getHomeGoods(type,page).then(res => {\r\n                this.goods[type].list.push(...res.data.list);\r\n                this.goods[type].page += 1;\r\n                this.$refs.scroll.finishPullUp();\r\n\r\n            })\r\n        },\r\n        \r\n\r\n    }\r\n\r\n}\r\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<!--\r\n * @Author: your name\r\n * @Date: 2022-04-26 09:27:03\r\n * @LastEditTime: 2022-05-05 10:25:58\r\n * @LastEditors: jxc 1225100315@qq.com\r\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n * @FilePath: \\mySuperMall-test\\src\\views\\home\\Home.vue\r\n-->\r\n<template>\r\n    <div id =\"home\">\r\n        <nav-bar class=\"home-nav\"><div slot=\"center\">购物车</div></nav-bar>\r\n\r\n\r\n        <tab-control :titles=\"['流行', '精选', '新款']\"\r\n            @TabClick=\"tabClick\" \r\n            ref=\"tabControl1\"\r\n            class=\"tab-control\"\r\n            v-show=\"isTabFixed\"/>\r\n\r\n        <scroll class=\"content\" ref=\"scroll\" \r\n            :probe-type=\"3\" @scroll=\"contentScroll\"\r\n            :pull-up-load=\"true\" @pullingUp=\"loadMore\">   <!-- class样式中必须设置高度 -->\r\n        <home-swiper :banners=\"banners\" @swiperImageLoad=\"swiperImageLoad\"/>\r\n        <recommend-view :recommends=\"recommends\"/>\r\n        <feature-view/>\r\n        <tab-control :titles=\"['流行', '精选', '新款']\"\r\n                    @TabClick=\"tabClick\" \r\n                    ref=\"tabControl2\" />\r\n\r\n        <goods-list :goods=\"showGoods\"/>\r\n        </scroll>\r\n        <back-top @click.native=\"backClick\" v-show=\"isShowBackTop\"/>        <!--修饰.native修饰什么时候用？  \r\n                                                                在我们需要监听一个组件的原生事件时，必须给对应的事件加上.native修饰符，才能进行监听-->\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from \"components/common/navbar/NavBar\"\r\nimport Scroll from '@/components/common/scroll/Scroll.vue'\r\n\r\nimport TabControl from '@/components/content/tabControl/TabControl.vue'\r\nimport GoodsList from '@/components/content/goods/goodsList.vue'\r\nimport BackTop from '@/components/content/backTop/BackTop.vue'\r\n\r\n\r\nimport HomeSwiper from \"./childComps/HomeSwiper\"\r\nimport RecommendView from './childComps/RecommendView.vue'\r\nimport FeatureView from './childComps/FeatureView.vue'\r\n\r\nimport {getHomeMultidata,getHomeGoods} from \"@/network/home.js\"\r\nimport {debounce} from \"@/common/utils\"\r\n\r\n\r\n\r\nexport default {\r\n    name:\"Home\",\r\n    components: { \r\n        NavBar,\r\n        Scroll,\r\n        TabControl,\r\n        GoodsList,\r\n        BackTop,\r\n        HomeSwiper,\r\n        RecommendView,\r\n        FeatureView,\r\n        \r\n        \r\n        \r\n      },\r\n      data(){\r\n          return{\r\n              banners: [],\r\n              recommends: [],\r\n              goods: {\r\n                  'pop': {page: 0, list: []},\r\n                  'new': {page: 0, list: []},\r\n                  'sell': {page: 0, list: []}\r\n              },\r\n            currentType: \"pop\",\r\n            isShowBackTop: false,\r\n            tabOffsetTop: 0,\r\n            isTabFixed: false,\r\n            saveY: 0,\r\n          }\r\n         \r\n      },\r\n      computed: {\r\n          showGoods() {\r\n             return this.goods[this.currentType].list;\r\n          },\r\n\r\n      },\r\n    created() {\r\n\r\n        //1.请求多个数据\r\n        this.getHomeMultidata()\r\n        //2.请求商品数据\r\n        this.getHomeGoods('pop')\r\n        this.getHomeGoods('new')\r\n        this.getHomeGoods('sell')\r\n      },\r\n    mounted() {\r\n\r\n\r\n        //created 3.监听item中图片加载完成\r\n        const refresh = debounce(this.$refs.scroll.refresh,50);\r\n        this.$bus.$on('itemImageLoad',()=> {\r\n        //this.$refs.scroll.refresh();\r\n        refresh();\r\n      })\r\n      },\r\n    activated() {\r\n        this.$refs.scroll.scrollTo(0,this.saveY,100)\r\n        this.$refs.scroll.refresh()\r\n        //console.log('lakai');\r\n      },\r\n    deactivated() {\r\n        this.saveY = this.$refs.scroll.getScrollY()\r\n        //console.log(this.$refs.scroll.getScrollY);\r\n        //console.log(this.$refs.scroll.getScrollY());\r\n      },\r\n    methods: {\r\n\r\n\r\n        //防抖函数\r\n\r\n/*         debounce(func,delay) {\r\n            let timer = null;\r\n            return function(...args){\r\n                if(timer) clearTimeout(timer)\r\n\r\n                timer = setTimeout(() => {\r\n                    func.apply(this,args)\r\n                }, delay);\r\n            }\r\n        }, */\r\n\r\n        /**\r\n         * 事件监听的相关的方法\r\n         */\r\n        tabClick(index) {\r\n            switch (index) {\r\n                case 0:\r\n                    this.currentType ='pop'; \r\n                    break;\r\n                case 1:\r\n                    this.currentType = 'new';\r\n                    break;\r\n                case 2:\r\n                    this.currentType = 'sell';\r\n                    break;\r\n            }\r\n            this.$refs.tabControl1.currentIndex = index;\r\n            this.$refs.tabControl2.currentIndex = index;\r\n        },\r\n\r\n        backClick() {\r\n            this.$refs.scroll.scrollTo(0,0,2000)\r\n        },\r\n        contentScroll(position) {\r\n            //1.判断BackTop是否显示\r\n            this.isShowBackTop = (-position.y) > 1000   //这里的处理牛逼\r\n\r\n            //2.决定tabControl是否吸顶（position：fixed）\r\n            this.isTabFixed = (-position.y) > this.tabOffsetTop\r\n\r\n        },\r\n        loadMore() {\r\n            //console.log('上啦加载更多');\r\n            this.getHomeGoods(this.currentType);\r\n        },\r\n        swiperImageLoad() {\r\n          //1.获取tabcontrol的offsetTop\r\n          //所有组件都有一个属性$el：用于获取组件中的元素\r\n          this.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop;\r\n        \r\n\r\n        },\r\n        /**\r\n         * 网络请求相关的方法\r\n         */\r\n        getHomeMultidata() {\r\n            getHomeMultidata().then(res => {\r\n                this.banners = res.data.banner.list;\r\n                this.recommends = res.data.recommend.list;\r\n            })\r\n        },\r\n        getHomeGoods(type) {\r\n            const page = this.goods[type].page+1;\r\n            getHomeGoods(type,page).then(res => {\r\n                this.goods[type].list.push(...res.data.list);\r\n                this.goods[type].page += 1;\r\n                this.$refs.scroll.finishPullUp();\r\n\r\n            })\r\n        },\r\n        \r\n\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/**scoped限定css样式只在这个页面起效果，同名作用域问题 */\r\n#home {\r\n    /* padding-top:44px; */\r\n    height: 100vh;      /**vh 视口高度 */\r\n    position: relative;\r\n}\r\n.home-nav{\r\n    background-color: var(--color-tint);\r\n    color: #fff;\r\n\r\n    /**在使用浏览器原生滚动时，为了让导航不跟随一起滚动 */\r\n    /* position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    z-index: 9; *加入框架后，属性不起作用 */\r\n}\r\n/* .tab-control {\r\n    position: sticky;\r\n    top: 44px;\r\n    z-index: 9;\r\n    加入框架后，属性不起作用\r\n} */\r\n.content {\r\n    overflow: hidden;\r\n    position: absolute;\r\n    top: 44px;\r\n    bottom: 49px;\r\n    left: 0;\r\n    right: 0;\r\n    \r\n}\r\n.tab-control {\r\n    position: relative;\r\n    z-index: 9;\r\n}\r\n/** 两种解决办法中的第二种\r\n.content {\r\n    height: calc(100% - 93px);\r\n    overflow: hidden;\r\n    margin-top: 44px;\r\n    \r\n} \r\n*/\r\n\r\n</style>"]}]}